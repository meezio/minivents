define([],function(){return function(n){var r={},t=[];n=n||this,n.on=function(t,e,f,o){return o=!!o,(r[t]=r[t]||[]).push([e,f,o]),n},n.one=function(r,t,e){return n.on(r,t,e,!0)},n.off=function(e,f){e||(r={});for(var o=r[e]||t,u=o.length=f?o.length:0;u--;)f==o[u][0]&&o.splice(u,1);return n},n.trigger=function(e){for(var f,o=r[e]||t,u=o.length>0?o.slice(0,o.length):o,i=0;f=u[i++];)f[0].apply(f[1],t.slice.call(arguments,1)),f[2]&&n.off(e,f[0]);return n}}});