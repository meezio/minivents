module.exports=function(n){var r={},t=[];n=n||this,n.on=function(t,e,o,u){return u=!!u,(r[t]=r[t]||[]).push([e,o,u]),n},n.one=function(r,t,e){return n.on(r,t,e,!0)},n.off=function(e,o){e||(r={});for(var u=r[e]||t,f=u.length=o?u.length:0;f--;)o==u[f][0]&&u.splice(f,1);return n},n.trigger=function(e){for(var o,u=r[e]||t,f=u.length>0?u.slice(0,u.length):u,l=0;o=f[l++];)o[0].apply(o[1],t.slice.call(arguments,1)),o[2]&&n.off(e,o[0]);return n}};